<!DOCTYPE html>
<html>
<head>
	<title>Quick introduction to pushState with Ajax | BookOfZeus</title>
	<meta name="description" content="Learn how to use the pushState method and use it with Ajax content." />
	<meta name="author" content="BookOfZeus" />
	<meta name="robots" content="index, follow" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />

	<meta name="google-site-verification" content="5IAePxZxNggUiJp9G82ARb7Wfo7AOTEpa-WHjEiwt1g" />
	<meta name="msvalidate.01" content="B5DFA066FA5291D9CB34785B1BC6675D" />
	<meta name="alexaVerifyID" content="vQHSFVDphyxYyFdLXh_rjrFaCwc" />
	<meta name="y_key" content="1541c56d97401c05" />	

	<meta name="DC.Creator" content="BookOfZeus" />
	<meta name="DC.Language" content="en" />

	<link href="https://plus.google.com/109493568868519843460" rel="publisher" />

	<link rel="author" href="https://plus.google.com/109493568868519843460">
	<link rel="shortcut icon" href="/media/favicon.ico" />
	<link rel="icon" href="/media/favicon.ico" />


	<link rel="image_src" href="/media/logo.png" />

	<link rel="canonical" href="http://bookofzeus.com/articles/jquery/quick-introduction-pushstate-with-ajax" />
	<link rel="stylesheet" type="text/css" href="/media/modern.css" media="all" />
	<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>

	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-23468853-1']);
	  _gaq.push(['_trackPageview']);
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</head>
<body id="body">

<!-- menu -->
<div id="menu">
	<img src="/media/menu.png" class="nav-toggler toggle-slide-left" alt="show or hide menu" width="24" height="24" />
	<div id="home2">
		Book<span>Of</span>Zeus
	</div>
</div>

<aside class="menu slide-menu-left">
	<header id="home">
		<div>
			<img src="/media/logo.png" alt="logo" width="57" height="57" />
			Book<span>Of</span>Zeus
		</div>
		<span>Articles, Tutorials &amp; Source Code</span>
	</header>

	<nav>
		<button class="close-menu">Close Menu</button>
		<ul>

	<li class="header"><a href="/articles/" title="Articles" class="selected">Articles</a>
	
		<ul>
		
			<li class="item"><a href="/articles/android/" title="Android" >Android</a></li>
		
			<li class="item"><a href="/articles/apache/" title="Apache" >Apache</a></li>
		
			<li class="item"><a href="/articles/css/" title="CSS" >CSS</a></li>
		
			<li class="item"><a href="/articles/documentation/" title="Documentation" >Documentation</a></li>
		
			<li class="item"><a href="/articles/html/" title="HTML" >HTML</a></li>
		
			<li class="item"><a href="/articles/javascript/" title="Javascript" >Javascript</a></li>
		
			<li class="item"><a href="/articles/jquery/" title="jQuery" class="selected">jQuery</a></li>
		
			<li class="item"><a href="/articles/linux/" title="Linux" >Linux</a></li>
		
			<li class="item"><a href="/articles/mobile/" title="Mobile" >Mobile</a></li>
		
			<li class="item"><a href="/articles/mongo/" title="Mongo" >Mongo</a></li>
		
			<li class="item"><a href="/articles/mysql/" title="MySQL" >MySQL</a></li>
		
			<li class="item"><a href="/articles/optimization/" title="Optimization" >Optimization</a></li>
		
			<li class="item"><a href="/articles/php/" title="PHP" >PHP</a></li>
		
			<li class="item"><a href="/articles/python/" title="Python" >Python</a></li>
		
			<li class="item"><a href="/articles/sass/" title="Sass" >Sass</a></li>
		
			<li class="item"><a href="/articles/subversion/" title="Subversion" >Subversion</a></li>
		
		</ul>
	
	</li>

	<li class="header"><a href="/codebase/" title="CodeBase" >CodeBase</a>
	
	</li>

	<li class="header"><a href="/contribute/" title="Contribute" >Contribute</a>
	
	</li>

</ul>
	</nav>

	<div id="latest">
		<h4>Good blog to read</h4>
		<a href="http://customizeubuntu.com" class="nw">Customize Ubuntu</a><br/>
		<a href="http://hardenubuntu.com" class="nw">Harden Ubuntu</a><br/>
	</div>
</aside>

<!-- content -->

<section>
	<article class="breadcrumbs">
	<a title="BookOfZeus" href="/">BookOfZeus</a> &gt; <a title="articles" href="/articles/">articles</a> &gt; <a title="jquery" href="/articles/jquery/">jquery</a>
</article>

<article>
	<header>
		<h1>Quick introduction to pushState with Ajax</h1>
		<h6>Posted on Saturday October 27, 2012 / by Eric Potvin</h6>
	</header>

	<p>As web technologies keep improving, new way to develop solutions for website evolves. One of them is of course Ajax, this very simple technique is used on a lot of websites now. The one I am more interesting now to talk about is pushState. </p>

<p>The pushState function is a simple way to push a fake URL onto the browser's history stack. It requires three (3) parameters:</p>

<h4>State object</h4>
<p>The state object is a JavaScript object which is associated with the new history entry created by pushState().

<h4>Title</h4>
<p>Title of the current HTML page. Firefox currently ignores this parameter. Passing the empty string here should be safe against future changes to the method.</p>

<h4>URL</h4>
<p>The URL you want to load. This URL is pushed in its history automatically.</p>

<p class="note">Source: <a href="https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method" title="Manipulating the browser history" rel="nofollow">Mozilla website</a></p>

<p>That's should be it for the theory, now let's put these words into code.</p>

<h4>HTML</h4>
<p>In this example I will have a simple HTML file that shows a welcome message.</p>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;history.pushState() Example&lt;/title&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/download/pushstate.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;pushState + Ajax Example&lt;/h1&gt;
&lt;nav&gt;
  &lt;a href="/pushstateajax/"&gt;Home&lt;/a&gt;
  &lt;a href="/pushstateajax/page/1/"&gt;Page 1&lt;/a&gt;
  &lt;a href="/pushstateajax/page/2/"&gt;Page 2&lt;/a&gt;
  &lt;a href="/pushstateajax/page/3/"&gt;Page 3&lt;/a&gt;
&lt;/nav&gt;
&lt;article&gt;
  &lt;h2&gt;Welcome to PSA&lt;/h2&gt;
  &lt;p&gt;This demonstrate how the history.pushState + Ajax works!&lt;/p&gt;
&lt;/article&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

<h4>Javascript</h4>
<p>Now, let's have the Javascript code for this page (defined in the <q>/download/pushstate.js</q>).</p>
<pre>
window.onpopstate = function(event) {
  getContent();
};
function getContent() {
  var u = location.pathname;
  $.ajax({
    data: {href: u},
    success: function(result) {
      $("p").html(result);
    }
  });
}
$(document).ready(function() {
  $.ajaxSetup ({  
    cache: false,
    url: "/path/to/script.php"
  }); 
  $('nav a').click(function(e) {
    var href = $(this).attr("href");
    document.title = 'blah';
    history.pushState('', '', href);
    getContent();
    e.preventDefault();
  });
});
</pre>

<p>The <q>window.onpopstate</q> is used when the use navigates on the website using the <q>back</q> and the <q>foward</q> button. You want to make sure the previous or current content loads properly.</p>

<p>Now simply add your logic in your PHP script. In this case, you will use the <q>$_GET['href']</q> to process or validate which page to load. Of course in this example I am using the SEO clean URLs and if you are using the same logic, make sure your configure properly your .htaccess file or your Apache config.</p>

<h4>IE Issue (yes of course)</h4>
<p>IE 9 and 10 (until preview 2) are not supporting the pushState() feature. The https://github.com/balupton/history.js from GitHub might be the solution.</p>



</article>

	<footer> 

		<h6>More links</h6>
		<a href="/about/" title="About">About</a>
		<a href="/articles/" title="Articles">Articles</a>
		<a href="/codebase/" title="Codebase">CodeBase</a>
		<a href="/contribute/" title="Contribute">Contribute</a>

		<h6>NewsLetters</h6>
		<a href="http://eepurl.com/nCBQb" class="nw signUp">Sign up for our free newsletter!</a>
		<a href="http://bookofzeus.us5.list-manage.com/unsubscribe?u=6d11dcc020299e18618aa63a0&amp;id=f144c95830" class="nw unsub">Unsubscribe from our newsletter</a>
		<a href="http://eepurl.com/nCBVX" class="nw powered">Powered by MailChimp</a>

		<div>&copy; 2011-2016 BookOfZeus</div>
		<p>
			All articles, code or tutorials listed on bookofzeus.com can be used as reference, links or as in a sharing matter without attribution.
			You cannot copy whole tutorials (unless permission is given), either translating to another language.
			By using and/or reading this site, you agree to our <a href="/privacy-policy/" title="Privacy Policy">privacy policy</a> and <a href="/terms-of-conditions" title="terms and conditions">terms and conditions</a>.
		</p>

	</footer>

</section>

<!--
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
-->
<script src="/media/main.js"></script>

<script>

document.getElementById("home").addEventListener("click", function(e) {
	window.location.href = 'http://bookofzeus.com';
	e.preventDefault();
});
document.getElementById("home2").addEventListener("click", function(e) {
	window.location.href = 'http://bookofzeus.com';
	e.preventDefault();
});

var els = document.getElementsByTagName("a"), els_length = els.length;
for (var i = 0, l = els_length; i < l; i++) {
    var el = els[i];
    if (el.href.replace('http://bookofzeus.com','') == window.location.pathname) {
        el.className= "selected";
    }
}

/*
$('.nw').click(function() { this.target = '_blank'; });
*/
</script>

</body>
</html>